%!PS-Adobe-2.0 EPSF-2.0
%%BoundingBox: 16 313 596 478
%%Creator: ImageMagick
%%Title: ex3-51.eps
%%EndComments
%
% Display a color image.  The image is displayed in color on
% Postscript viewers or printers that support color, otherwise
% it is displayed as grayscale.
%
/buffer 512 string def
/byte 1 string def
/color_packet 3 string def
/compression 1 string def
/gray_packet 1 string def
/pixels 768 string def

/DirectClassPacket
{
  %
  % Get a DirectClass packet.
  %
  % Parameters: 
  %   red.
  %   green.
  %   blue.
  %   length: number of pixels minus one of this color (optional).
  %
  currentfile color_packet readhexstring pop pop
  compression 0 gt
  {
    /number_pixels 3 def
  }
  {
    currentfile byte readhexstring pop 0 get
    /number_pixels exch 1 add 3 mul def
  } ifelse
  0 3 number_pixels 1 sub
  {
    pixels exch color_packet putinterval
  } for
  pixels 0 number_pixels getinterval
} bind def

/DirectClassImage
{
  %
  % Display a DirectClass image.
  %
  systemdict /colorimage known
  {
    columns rows 8
    [
      columns 0 0
      rows neg 0 rows
    ]
    { DirectClassPacket } false 3 colorimage
  }
  {
    %
    % No colorimage operator;  convert to grayscale.
    %
    columns rows 8
    [
      columns 0 0
      rows neg 0 rows
    ]
    { GrayDirectClassPacket } image
  } ifelse
} bind def

/GrayDirectClassPacket
{
  %
  % Get a DirectClass packet;  convert to grayscale.
  %
  % Parameters: 
  %   red
  %   green
  %   blue
  %   length: number of pixels minus one of this color (optional).
  %
  currentfile color_packet readhexstring pop pop
  color_packet 0 get 0.299 mul
  color_packet 1 get 0.587 mul add
  color_packet 2 get 0.114 mul add
  cvi
  /gray_packet exch def
  compression 0 gt
  {
    /number_pixels 1 def
  }
  {
    currentfile byte readhexstring pop 0 get
    /number_pixels exch 1 add def
  } ifelse
  0 1 number_pixels 1 sub
  {
    pixels exch gray_packet put
  } for
  pixels 0 number_pixels getinterval
} bind def

/GrayPseudoClassPacket
{
  %
  % Get a PseudoClass packet;  convert to grayscale.
  %
  % Parameters: 
  %   index: index into the colormap.
  %   length: number of pixels minus one of this color (optional).
  %
  currentfile byte readhexstring pop 0 get
  /offset exch 3 mul def
  /color_packet colormap offset 3 getinterval def
  color_packet 0 get 0.299 mul
  color_packet 1 get 0.587 mul add
  color_packet 2 get 0.114 mul add
  cvi
  /gray_packet exch def
  compression 0 gt
  {
    /number_pixels 1 def
  }
  {
    currentfile byte readhexstring pop 0 get
    /number_pixels exch 1 add def
  } ifelse
  0 1 number_pixels 1 sub
  {
    pixels exch gray_packet put
  } for
  pixels 0 number_pixels getinterval
} bind def

/PseudoClassPacket
{
  %
  % Get a PseudoClass packet.
  %
  % Parameters: 
  %   index: index into the colormap.
  %   length: number of pixels minus one of this color (optional).
  %
  currentfile byte readhexstring pop 0 get
  /offset exch 3 mul def
  /color_packet colormap offset 3 getinterval def
  compression 0 gt
  {
    /number_pixels 3 def
  }
  {
    currentfile byte readhexstring pop 0 get
    /number_pixels exch 1 add 3 mul def
  } ifelse
  0 3 number_pixels 1 sub
  {
    pixels exch color_packet putinterval
  } for
  pixels 0 number_pixels getinterval
} bind def

/PseudoClassImage
{
  %
  % Display a PseudoClass image.
  %
  % Parameters: 
  %   colors: number of colors in the colormap.
  %   colormap: red, green, blue color packets.
  %
  currentfile buffer readline pop
  token pop /colors exch def pop
  /colors colors 3 mul def
  /colormap colors string def
  currentfile colormap readhexstring pop pop
  systemdict /colorimage known
  {
    columns rows 8
    [
      columns 0 0
      rows neg 0 rows
    ]
    { PseudoClassPacket } false 3 colorimage
  }
  {
    %
    % No colorimage operator;  convert to grayscale.
    %
    columns rows 8
    [
      columns 0 0
      rows neg 0 rows
    ]
    { GrayPseudoClassPacket } image
  } ifelse
} bind def

/DisplayImage
{
  %
  % Display a DirectClass or PseudoClass image.
  %
  % Parameters: 
  %   x & y translation.
  %   x & y scale.
  %   image columns & rows.
  %   class: 0-DirectClass or 1-PseudoClass.
  %   compression: 0-RunlengthEncodedCompression or 1-NoCompression.
  %   hex color packets.
  %
  gsave
  currentfile buffer readline pop
  token pop /x exch def
  token pop /y exch def pop
  x y translate
  currentfile buffer readline pop
  token pop /x exch def
  token pop /y exch def pop
  x y scale
  currentfile buffer readline pop
  token pop /columns exch def
  token pop /rows exch def pop
  currentfile buffer readline pop
  token pop /class exch def pop
  currentfile buffer readline pop
  token pop /compression exch def pop
  class 0 gt { PseudoClassImage } { DirectClassImage } ifelse
  grestore
  showpage
} bind def

DisplayImage
16 313
580 165
176 50
1
0
39
989898
ffffff
ffff66
606060
ffcb00
986600
cb9800
ffff33
666600
000000
cbcb00
e0e0e0
888888
585858
686868
707070
505050
383838
282828
181818
202020
303030
101010
909090
787878
c8c8c8
f0f0f0
e8e8e8
cbcbcb
404040
b8b8b8
a0a0a0
f8f8f8
484848
a8a8a8
b0b0b0
808080
d8d8d8
080808
007c01320000027a03000132000002000478050003000132000002000478050003000132
000002000401060d0458060704070500030001320000020004010600070c045806000707
040605000300013200000200040106000709040006000700045806000703040106000700
040605000300013200000200040106000706040007000400070006000700041e08000900
043706000702040007000400060007000604040105000300013200000200040106000705
040007000400070004000600070004130a0005000902060004040901041609000800041e
060007010400070004010600070504010500030001320000020004010600070404000700
04030600070004120a0009050a000403090104160901041e060007000400070004020600
070306000700040105000300013200000200040106000703040007000404060007000412
0901080004000a000500090104000a000800090204010500090005000a00040008000900
060009000500090105000401050009010600040009030401050009010600040009000800
050009000500041106000700040406000702040006000700040105000300013200000200
040106000702040007000405060007000412090104020a00090104000904040005000903
040009070400060009030400090304000600090304000904041106000700060507010401
060007000401050003000132000002000401060007010400070004060600070004120901
0a00040209010400090104000901040009010a000901040009010a0009010a0009010400
09010a000900060004010901040109010a0009000600040009010a000900080004120707
040007000400060007000401050003000132000002000401060007020407060007000412
090105000401080009000500040009010a00090104000901040009010400090104000901
040009010400090204030901040109020402090104170600070304000700040106000700
0401050003000132000002000401060007010400070004060600070004120a0009050a00
040005000903040005000902060004000901040009010400090104000500090304010901
040105000903040009010417060007020400070004020600070004010500030001320000
02000401060007000400070004070600070004130a00090205000a0004010a0005000902
04000a0005000900050004010901040009010400090104000a0005000901060004010900
080004010a00050009010600040009010417060007010405060007000401050003000132
00000200040106000700060a0700045b0600070006070700040105000300013200000200
04010600070c045b06000709040105000300013200000200047805000300013200000200
04780500030000310300000001000b7801320c000300000001000bab0c00030000000100
0b000ca801000b000c000300000001000b000c0000a701000b000c000300000001000b00
0c0000000d000e010f000d0010001100120013031400120015000d000e010f000d001000
1100120013031400120015000d000e010f000d0010001100120013031400120015000d00
0e010f000d0010001100120013031400120015000d000e010f000d001000110012001303
1400120015000d000e010f000d0010001100120013031400120015000d000e010f000d00
10001100120013031400120015000d000e010f000d001000110012001303140012001500
0d000e010f000d0010001100120013031400120015000d000e010f000d00100011001200
13031400120015000d000e010f000d001000110012001303140012001500090000000100
0b000c000300000001000b000c0000000300130014031200140312001300160011000300
130014031200140312001300160011000300130014031200140312001300160011000300
130014031200140312001300160011000300130014031200140312001300160011000300
130014031200140312001300160011000300130014031200140312001300160011000300
130014031200140312001300160011000300130014031200140312001300160011000300
130014031200140312001300160011000300130014031200140312001300160011000900
000001000b000c000300000001000b000c00000003001400090b110003001400090b1100
03001400090b110003001400090b110003001400090b1100030014031200140012001401
120014011300110003001403120014001200140112001401130011000300140312001400
120014011200140113001100030014031200140012001401120014011300110003001403
120014001200140112001401130011000300140312001400120014011200140113001100
0900000001000b000c000300000001000b000c00000010001300090b110010001300090b
110010001300090b110010001300090b110010001300090b110010001300120014001200
140012001400120014001201140016001100100013001200140012001400120014001200
140012011400160011001000130012001400120014001200110001011201140016001100
100013001200140012001400120014001200140012011400160011001000130012001400
120014001200140012001400120114001600110010001300120014001200140012001400
120014001201140016001100090000030300000001000b000c00000010001400090b1100
10001400090b110010001400090b110010001400090b110010001400090b110010001401
120017000000170000001700000018001401160011001000140112001700000017000000
170000001800140116001100100014011202150019000101120014011600110010001401
120117001a0001001b000000110014001300160011001000140112001700000017000000
17000000180014011600110010001401120318001c011800120013001600110009000000
01000b000c000300000001000b000c0000001d001200090b11001d001200090b11001d00
1200090b11001d001200090b11001d001200090b11001d001201110001051c0013011600
11001d001201110001051c001301160011001d001201150018001c000103140013011600
11001d00120115001e0001041f001301160011001d001201110001051c00130116001100
1d00120115001200150011002000010117001301160011000900000001000b000c000300
000001000b000c00000021001200090b1d0021001200090b1d0021001200090b1d002100
1200090b1d0021001200090b1d00210012001500030001001b0017020c000f0013001601
1100210012001500030001001b0017020c000f0013001601110021001200150012000000
010413001600130016001100210012001500030001010f00140017000101140013001600
1100210012001500030001001b0017020c000f0013001601110021001200150012001500
1200220001020c0013001600130011000900000001000b000c000300000001000b000c00
00001d001400090b11001d001400090b11001d001400090b11001d001400090b11001d00
1400090b11001d00140012000e000100220013011600130016001300160111001d001400
12000e000100220013011600130016001300160111001d0014001201140013010c000101
160013001600130011001d0014001200230001001c001600130014001001120016011100
1d00140012000e000100220013011600130016001300160111001d001400120114001d00
0100220001010c0013001600130011000900000001000b000c000300000001000b000c00
000015001300090b110015001300090b110015001300090b110015001300090b11001500
1300090b11001500130014000c0001002400150010001500160013001600130016001100
1500130014000c0001002400150010001500160013001600130016001100150013001400
1301160013000c0001011600130016011100150013001400190001001700210017001800
1500130016001300160011001500130014000c0001002400150010001500160013001600
130016001100150013001400130119002000150001010c00160013001600110009000000
01000b000c000300000001000b000c00000012001600090b110012001600090b11001200
1600090b110012001600090b110012001600090101060902110012001600130017000100
250020010100220014001600130026001100120016001300170001002500200101002200
140016001300260011001200160013011600130016000c00010113001602110012001600
130001011a00010120010e00130016011100120016001300170001002500200101002200
140016001300260011001200160013010e00010024001300010020000c00130016011100
0900000001000b000c000300000001000b000c00000015001600090b110015001600090b
110015001600090b110015001600090b1100150016000901010609021100150016001300
1e0020011c0120011f0016002600160011001500160013001e0020011c0120011f001600
26001600110015001600130016001300160013002400010020001600130026011d001500
1600130020000100200022000c001a0020001a0014002600160011001500160013001e00
20011c0120011f00160026001600110015001600130014000b011400160001001a002400
130026011d000900000001000b000c000300000001000b000c00000015002600090b1100
15002600090b110015002600090b110015002600090b110015002600090b110015002600
16000e0024001000130016001f001a00200016002600090011001500260016000e002400
1000130016001f001a00200016002600090011001500260016011300160124001b001a00
1600260009002600110015002600160020011e0013001600210020010300090026001100
1500260016000e0024001000130016001f001a0020001600260009001100150026001600
24001a000e00160120001a0024002601090011000900000001000b000c00030000000100
0b000c00000015002600090b110015002600090b110015002600090b110015002600090b
110015002600090b1100150026010900260311001b011100090111001500260109002603
11001b0111000901110015002601090026020f001b000b00090026000901110015002601
1c00200018002600090026001a0020000f00090026001100150026010900260311001b01
1100090111001500260123001b0023021b001a0025002400090111000900000001000b00
0c000300000001000b000c0000001100090c1101090c1101090c1101090c1101090c1101
090013000f011400090111000b01120009011101090013000f011400090111000b011200
0901110109050f000b001b00090315001100090100001a0018002600090016001b010d00
09011101090013000f011400090111000b01120009011101090122001a001b031a001b00
2200090111000900000001000b000c000300000001000b000c0000001100090c1101090c
1101090c1101090c1101090c1101090026001b0025000f00090117000b001c0009021101
090026001b0025000f00090117000b001c000902110109050e001b000b00090311010901
10001b001c00110009000c001b000b00140009011101090026001b0025000f0009011700
0b001c00090211010901120011030b010c001500090115000900000001000b000c000300
000001000b000c0000001500090c11001500090c11001500090c11001500090c11001500
090c110015000901180025000b0022002300250103000902110015000901180025000b00
220023002501030009021100150009050d001f01090311001500090223001b000b021b00
18000902110015000901180025000b00220023002501030009021100150009061b000b00
0e00090211000900000001000b000c000300000001000b000c0000001400090c15001400
090c15001400090c15001400090c15001400090c1500140009012600180025001c002500
1c000e0009031500140009012600180025001c0025001c000e00090315001400090c1500
1400090226000c0019000b001900030009031100140009012600180025001c0025001c00
0e0009031500140009060b010f00090215000900000001000b000c000300000001000b00
0c0000001400090c15001400090c15001400090c15001400090c15001400090c15001400
09032600110015000905110014000903260011001500090511001400090a1a0115001400
090c150014000903260011001500090511001400090c15000900000001000b000c000300
000001000b000c0000001400090c12001400090c12001400090c12001400090c12001400
090c12001400090c12001400090c12001400090a1a0112001400090c12001400090c1200
1400090c12000900000001000b000c000300000001000b000c00000014001d0311001d00
11001d001500110015011400130014001d0311001d0011001d0015001100150114001300
14001d0311001d0011001d001500110015011400130014001d0311001d0011001d001500
110015011400130014001d0311001d0011001d001500110015011400130014001d031100
1d0011001d001500110015011400130014001d0311001d0011001d001500110015011400
130014001d0311001d0011001d001500110015011400130014001d0311001d0011001d00
1500110015011400130014001d0311001d0011001d001500110015011400130014001d03
11001d0011001d00150011001501140013000900000001000b000c000300000001000b00
0c00000009a5000001000b000c000300000001000b000c0000a701000b000c0003000000
01000b000c000194000001120b000c000300000001000b9600000b130c00030000000c97
00000c1403b0

%%Trailer
